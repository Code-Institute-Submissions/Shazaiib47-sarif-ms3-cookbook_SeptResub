{% extends "base.html" %}
{% block content %}

 <div class="row">
    <div class="carousel carousel-slider" style="position: absolute; margin-top: 64px;max-height:40vh; height:40vh">
        <a class="carousel-item" href="#one!"><img src="https://lorempixel.com/800/400/food/1"></a>
        <a class="carousel-item" href="#two!"><img src="https://lorempixel.com/800/400/food/2"></a>
        <a class="carousel-item" href="#three!"><img src="https://lorempixel.com/800/400/food/3"></a>
        <a class="carousel-item" href="#four!"><img src="https://lorempixel.com/800/400/food/4"></a>
    </div>
</div>

    <div style="margin-top: 400px;">

    <h3 class="light-blue-text text-darken-4 center-align">All Recipes</h3>

    <div class="mid-center">
        <div class="col s12 m5">
          <div class="card-panel red darken-4">
            <span class="white-text">I am a very simple card. I am good at containing small bits of information.
            I am convenient because I require little markup to use effectively. I am similar to what is called a panel in other frameworks.
            </span>
          </div>
        </div>
      </div>

    <div class="row card-panel grey lighten-5">
         <form action="{{ url_for('search') }}" method="post" class="col s12">
            <div class="row center-align">
                <div class="input-field col s12 m8">
                    <i class="fas fa-search prefix light-blue-text text-darken-4"></i>
                    <input type="text" name="query" id="query" minlength="3" class="validate" required>
                    <label for="query">Search Recipes</label>
                </div>
                <div class="col s12 m4" style="margin-top: 3vh;">
                    <button type="submit" class="light-blue darken-1 btn text-shadow">
                        <i class="fas fa-search left"></i> Search
                    </button>
                </div>
            </div>
        </form>

    </div>

    {% if recipes|length > 0 %}
    <ul class="collapsible">
        {% for recipe in recipes %}
        <li>
            <div class="collapsible-header white-text red darken-4 text-shadow">
                <div class="col s3">
                    <i class="fas fa-caret-down"></i>
                    {% if session.user|lower == recipe.created_by|lower %}
                    <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" class="btn-small green accent-4">Done</a>
                    <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" class="btn-small light-blue lighten-1">Edit</a>
                    {% endif %}
                </div>
                <div class="col s9">
                    <strong>{{ recipe.recipe_name }}</strong> : 
                {% if recipe.recipe_made == "on" %}
                    <i class="fas fa-check-circle light-blue-text text-lighten-2 tooltipped"
                        data-position="right" data-tooltip="I have made this"></i>
                {% endif %}
                </div>
            </div>
            <div class="collapsible-body row"> 
                <div class="col s8">
                <strong>{{ recipe.recipe_category }}</strong>
                <p>{{ recipe.recipe_description }}</p>
                <p><em>by: {{recipe.created_by }}</em></p>
            </div>
                <div class="col s4"
                >
                    {% if recipe.image_url != "" %}
                    <img src="{{ recipe.image_url }}" alt="{{ recipe.name }}" width="100px" height="100px">
                    {% endif %}
                </div>
            </div>
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <h3 class="red-text text-darken-4 center-align">No Results Found</h3>
      {% endif %}
    </div>

{% endblock %}